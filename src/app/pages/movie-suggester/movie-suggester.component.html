<div class="suggester-container">
  <h1 class="page-title">Não sabe o que assistir?</h1>
  <p class="subtitle">Defina seus filtros e deixe a gente te surpreender!</p>

  <div class="filters-panel">
    <div class="filter-group">
      <label for="genre">Gênero:</label>
      <select id="genre" name="genre" [(ngModel)]="selectedGenreId">
        <option value="">Qualquer Gênero</option>
        <option *ngFor="let genre of genres" [value]="genre.id">
          {{ genre.name }}
        </option>
      </select>
    </div>
    <div class="filter-group">
      <label for="sort">Ordenar por:</label>
      <select id="sort" name="sort" [(ngModel)]="sortBy">
        <option value="popularity.desc">Mais Populares</option>
        <option value="revenue.desc">Maiores Bilheterias</option>
        <option value="vote_average.desc">Mais Bem Avaliados</option>
        <option value="primary_release_date.desc">Mais Recentes</option>
      </select>
    </div>
    <div class="filter-group">
      <label for="rating">Nota Mínima: {{ minRating }}</label>
      <input
        type="range"
        id="rating"
        name="rating"
        min="0"
        max="10"
        step="0.5"
        [(ngModel)]="minRating"
      />
    </div>
    <div class="filter-group">
      <label for="votes">Mínimo de Votos: {{ minVoteCount }}</label>
      <input
        type="range"
        id="votes"
        name="votes"
        min="0"
        max="1000"
        step="50"
        [(ngModel)]="minVoteCount"
      />
    </div>
    <div class="filter-group">
      <label for="year">A partir do ano:</label>
      <input
        type="number"
        id="year"
        name="year"
        placeholder="Ex: 2010"
        [(ngModel)]="startYear"
      />
    </div>
    <div class="filter-group">
      <label for="exact-year">Ano Específico (opcional):</label>
      <input
        type="number"
        id="exact-year"
        name="exact-year"
        placeholder="Ex: 1994"
        [(ngModel)]="exactYear"
      />
    </div>
  </div>

  <button
    class="suggest-button"
    (click)="findAndSuggestMovie()"
    [disabled]="isLoading"
  >
    <span *ngIf="!isLoading">Me Surpreenda!</span>
    <span *ngIf="isLoading">Procurando...</span>
  </button>

  <button class="clear-history-button" (click)="clearHistory()">
    Limpar Histórico de Sugestões
  </button>

  <div class="result-area">
    <app-movie-card
      *ngIf="suggestedMovie"
      [movie]="suggestedMovie"
    ></app-movie-card>
    <p *ngIf="error" class="error-message">{{ error }}</p>
  </div>
</div>
